# 项目前置依赖服务清单

本文档详细列出了 扬帆测试平台 项目运行所需的基础依赖服务。在本地开发或测试环境中，推荐使用提供的 `docker-compose.data.yml` 快速部署这些服务。

## 1. 依赖服务概览

项目主要依赖以下三个核心组件：MySQL、Redis 和 RabbitMQ。

### 1.1 MySQL (关系型数据库)
*   **用途**: 存储项目核心业务数据。
*   **版本**: 8.0
*   **Docker 镜像**: `mysql:8.0`
*   **本地映射端口**: `43306` (容器端口: 3306)
*   **默认数据库名**: `yf`
*   **默认 Root 密码**: `123456`
*   **数据持久化**: `./mysql/data`

### 1.2 Redis (缓存服务)
*   **用途**: 提供高性能的键值存储，用于缓存、会话管理及临时数据存储。
*   **版本**: 7 (Alpine)
*   **Docker 镜像**: `redis:7-alpine`
*   **本地映射端口**: `46378` (容器端口: 6378)
*   **配置文件挂载**: `./config/redis/redis.conf`
*   **开启持久化**: 是 (AOF)

### 1.3 RabbitMQ (消息队列)
*   **用途**: 处理异步任务、服务间解耦及削峰填谷。
*   **版本**: 3.13 (带管理界面)
*   **Docker 镜像**: `rabbitmq:3.13-management`
*   **本地映射端口**:
    *   AMQP 服务: `45672` (容器端口: 5672)
    *   管理界面: `45673` (容器端口: 15672)
*   **默认凭证**:
    *   用户名: `guest`
    *   密码: `guest`

## 2. 本地快速部署

使用 Docker Compose 可以一键启动所有依赖服务。请确保本地已安装 Docker 及 Docker Compose。

```bash
# 在项目根目录下执行
docker-compose -f deploy/docker-compose/docker-compose.data.yml up -d
```

启动后，可以通过浏览器访问 `http://localhost:45673` 查看 RabbitMQ 管理界面。

## 3. 生产环境建议

虽然 Docker Compose 部署方式非常适合本地开发和测试环境，但在**生产环境**中，为了保障服务的高可用性、数据安全性和可维护性，**强烈建议使用云服务商提供的托管服务**，而不是自行维护 Docker 容器。

### 3.1 推荐方案

| 组件 | 推荐云服务 (示例) | 优势 |
| :--- | :--- | :--- |
| **MySQL** | 阿里云 RDS MySQL, AWS RDS for MySQL, 腾讯云 CDB | 提供自动备份、主从高可用、监控报警、性能优化建议及自动扩容能力。 |
| **Redis** | 阿里云 Redis 社区版/企业版, AWS ElastiCache for Redis | 提供集群架构、读写分离、持久化保障及无感扩容。 |
| **RabbitMQ** | 阿里云消息队列 RabbitMQ 版, AWS Amazon MQ | 托管的消息队列服务，免去运维集群的复杂度，提供更高的消息可靠性投递保障。 |

### 3.2 注意事项
*   **数据安全**: 生产环境请务必修改默认端口和强密码，切勿使用文档中的默认弱密码 (`123456`, `guest`)。
*   **网络隔离**: 建议将数据库和中间件服务部署在私有网络 (VPC) 中，仅允许应用服务器访问，禁止公网直接访问。
*   **备份策略**: 确保配置了定期自动备份策略，以防数据丢失。
