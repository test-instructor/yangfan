(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{477:function(a,s,e){"use strict";e.r(s);var n=e(2),t=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"在线demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在线demo"}},[a._v("#")]),a._v(" 在线demo")]),a._v(" "),s("p",[a._v("首页：http://82.157.150.119:8080/\n用户名：admin\n密码： 123456")]),a._v(" "),s("h1",{attrs:{id:"部署方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署方式"}},[a._v("#")]),a._v(" 部署方式")]),a._v(" "),s("ol",[s("li",[a._v("新建数据库，并导入"),s("code",[a._v("docs/sql/yangfan.sql")]),a._v("文件")]),a._v(" "),s("li",[a._v("管理员账号"),s("code",[a._v("yangfan")]),a._v(",密码"),s("code",[a._v("123456")])])]),a._v(" "),s("h2",{attrs:{id:"shell-脚本一键安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本一键安装"}},[a._v("#")]),a._v(" shell 脚本一键安装")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入目录")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" /home/yangfan "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /home/yangfan\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 执行安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fsSLk")]),a._v(" http://docs.yangfan.gd.cn/install/install.sh"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v('"')]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("blockquote",[s("ol",[s("li",[a._v("脚本默认安装在/data/yangfan目录下")]),a._v(" "),s("li",[a._v("如需修改配置请到安装目录下修改"),s("code",[a._v("./config/docker.config.yaml")]),a._v("文件")]),a._v(" "),s("li",[s("code",[a._v("./config/docker.config.yaml")]),a._v("中的"),s("code",[a._v("grafana-host")]),a._v("需要手动修改为"),s("code",[a._v("http://IP:3000")]),a._v("，否则无法访问grafana")]),a._v(" "),s("li",[s("code",[a._v("./config/docker.config.yaml")]),a._v("中的"),s("code",[a._v("fs")]),a._v("需要手动修改为飞书登录相关配置，否则无法登录")]),a._v(" "),s("li",[a._v("修改配置后重新执行安装脚本即可")])])]),a._v(" "),s("h2",{attrs:{id:"docker-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-部署"}},[a._v("#")]),a._v(" docker 部署")]),a._v(" "),s("ul",[s("li",[a._v("前端：修改对应"),s("code",[a._v("docker-compose")]),a._v("文件中的"),s("code",[a._v("ENV_VITE_FS_APP_ID")]),a._v("、"),s("code",[a._v("ENV_VITE_FS_LOGIN")])]),a._v(" "),s("li",[a._v("后端：修改"),s("code",[a._v("deploy/docker-compose/config/docker.config.yaml")]),a._v("中的数据库"),s("code",[a._v("mysql")]),a._v("、飞书登录"),s("code",[a._v("fs")]),a._v("相关配置")]),a._v(" "),s("li",[a._v("docker镜像源：目前使用阿里云镜像源(registry.cn-hangzhou.aliyuncs.com)，如需使用docker官方镜像源，请将阿里云镜像源(registry.cn-hangzhou.aliyuncs.com/)删除即可")])]),a._v(" "),s("ol",[s("li",[a._v("本地构建模式文件："),s("code",[a._v("deploy/docker-compose/docker-compose-build.yaml")])]),a._v(" "),s("li",[a._v("远程镜像模式文件: "),s("code",[a._v("deploy/docker-compose/docker-compose-image.yaml")])]),a._v(" "),s("li",[a._v("执行命令："),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" deploy/docker-compose\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 本地构建模式")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--build")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" docker-compose-build.yaml --force-recreate "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 远程镜像模式")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" docker-compose-image.yaml\n   \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])])])]),a._v(" "),s("h2",{attrs:{id:"k8s-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#k8s-部署"}},[a._v("#")]),a._v(" k8s 部署")]),a._v(" "),s("p",[a._v("文件目录"),s("code",[a._v("./deploy/kubernetes")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("kubernetes\n    ├── grafana-prometheus-pushgateway    "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 性能测试报告监控")]),a._v("\n    ├── httpbin                           "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# http、grpc demo")]),a._v("\n    ├── k8s_yangfan.yaml                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 部署文件")]),a._v("\n    ├── server                            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 后端部署文件")]),a._v("\n    ├── web                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 前端部署文件")]),a._v("\n    └── yangfan-namespace.yaml            "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 命名空间")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br")])]),s("ol",[s("li",[a._v("修改"),s("code",[a._v("ConfigMap/docker-config-yaml")]),a._v("中的数据库"),s("code",[a._v("mysql")]),a._v("、飞书登录"),s("code",[a._v("fs")]),a._v("相关配置")]),a._v(" "),s("li",[a._v("修改"),s("code",[a._v("Deployment/yangfan-web")]),a._v("中的"),s("code",[a._v("ENV_VITE_FS_APP_ID")]),a._v("、"),s("code",[a._v("ENV_VITE_FS_LOGIN")])]),a._v(" "),s("li",[a._v("执行命令："),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" deploy/kubernetes\nkubectl apply "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" k8s_yangfan.yaml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])])])}),[],!1,null,null,null);s.default=t.exports}}]);